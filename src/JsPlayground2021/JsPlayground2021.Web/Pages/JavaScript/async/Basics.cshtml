@page

@using JsPlayground2021.Web.Data.Enums
@using JsPlayground.Pages.Javascript.async

@model BasicsModel

@{
    Layout = "~/Pages/Shared/_PageLayout.cshtml";
}

@{
    ViewData["Title"] = "async";
}

@section LibraryHeader {JavaScript}
@section PageName {async}

@section Menu
{
    <partial name="_MenuContainer" model="MenuType.Javascipt" />
}

<p>
    There's undoubtedly a lot more to cover but here is a basic example of how to make async calls in js.
</p>

<div class="card text-white bg-info m-3">
    <div class="card-body">
        <div id="demo"></div>
    </div>
</div>

<pre>
<code>
let FetchData = async () =>
{
    let response = await fetch("https://city-info-api-demo.azurewebsites.net/api/v1.0/cities?pagenumber=1&pagesize=10");
    let data = await response.json();
    let firstCity = data[0];
    document.getElementById("demo").innerHTML = `${firstCity.cityId} - ${firstCity.name}`;
};

FetchData();
    </code>
</pre>

<p>&nbsp;</p>


@section Scripts
{
    <script>
        let FetchData = async () => {
            let response = await fetch("https://city-info-api-demo.azurewebsites.net/api/v1.0/cities?pagenumber=1&pagesize=10");
            let data = await response.json();
            let firstCity = data[0];
            document.getElementById("demo").innerHTML = `${firstCity.cityId} - ${firstCity.name}`;
        };

        FetchData();
    </script>
}
